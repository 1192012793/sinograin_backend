<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.toughguy.sinograin.model.barn.CornExaminingReport">
	<!-- 查询某条库 -->
	<select id="findAll" parameterType="int" resultType="CornExaminingReport">
		SELECT pbl.libraryName pLibraryName,bl.libraryName,bs.sampleNum,bs.sampleNo,
		bs.position,bs.sort,bs.amount,bs.gainTime,bs.storageTime storageTime,
		bs.sampleTime,bs.remark,bm.length,bm.wide,bm.high,bm.deductVolume,bm.realVolume,
		bm.realCapacity,bm.correctioFactor,bm.aveDensity,bm.unQuality,bm.grainQuality,bm.slip,
		bm.qualityGrade,bsc.pingjunzhi shuifen_pingjunzhi,bzbc.zazhizongliang_1,bzbc.buwanshanlihanliang_pingjunzhi_1,
		bzbc.shengmeilihanliang_pingjunzhi,bcc.sezeqiwei_pingjunzhi,bzc.pingjunzhi zhifangsuanzhi_pingjunzhi,byp.pinchangpingfenzhi
		FROM barn_library pbl LEFT JOIN barn_library bl on bl.pLibraryId = pbl.id 
		LEFT JOIN barn_register br ON br.libraryId = bl.id
		LEFT JOIN barn_sample bs ON bs.pId = br.id 
		LEFT JOIN barn_manuscript bm on bm.sampleId = bs.id 
		LEFT JOIN barn_small_sample bss on bss.sampleId = bs.id 
		LEFT JOIN barn_shuifen_cedingjilu bsc on bsc.smallSampleId = bss.id
		LEFT JOIN barn_zazhi_buwanshanli_cedingjilu bzbc on bzbc.smallSampleId = bss.id
		left join barn_check_cedingjilu bcc on bcc.smallSampleId = bss.id
		LEFT JOIN barn_zhifangsuanzhi_cedingjilu bzc on bzc.smallSampleId = bss.id
		LEFT JOIN barn_yumipinchang_pingfenjilu byp on byp.smallSampleId = bss.id
		<include refid="paramsSQL"/>
	</select>
	
	<!-- 通用的设置条件的查询SQL语句 -->
	<sql id="paramsSQL">
		<where>
			<if test=" sampleNum != null and sampleNum != '' ">
				and bs.sampleNum = #{sampleNum}
			</if>
			<if test=" smallSampleNum != null and smallSampleNum != '' ">
				and bss.smallSampleNum = #{smallSampleNum}
			</if>
			
		</where>
	</sql>
</mapper>